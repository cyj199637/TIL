# Chapter04. 웹사이트의 동작 원리
## 4-1 웹사이트: 웹사이트는 어떻게 생겼을까?

### 웹사이트를 본다는 것은?

- 웹사이트
    - 웹 서버 애플리케이션이 공개하는 다양한 웹 페이지의 집합
- 웹 사이트를 본다

  → 웹사이트를 구성하는 웹 페이지의 파일을 웹 서버 애플리케이션에서 웹 브라우저로 전송하여 표시하는 것

    1. 웹 브라우저에서 웹사이트 주소를 입력하거나 링크를 클릭하여 웹 서버 애플리케이션에 파일 전송 요청을 보냄
    2. 웹 서버 애플리케이션은 요청받은 파일을 반환
        - 한 번으로 끝나는 것은 아님
    3. 웹 브라우저에서 수신한 파일을 표시하면, 웹사이트를 볼 수 있음

<br/>

웹 브라우저든 웹 서버 애플리케이션이든 웹사이트 접속에 이용하는 프로토콜의 조합은 `HTTP/HTTPS + TCP + IP` 로 통일되어야 한다.

(네트워크 인터페이스층은 같은 프로토콜을 사용하지 않아도 됨)

<br/><br/>

## 4-2 HTML: 웹페이지를 만든다

### 웹페이지는 HTML 파일로 만들어진다

- HTML
    - HT → HyperText: 복수의 문서를 연결해 서로 참조할 수 있는 문서
    - ML → Markup Language: 문서의 구조를 명확히 표현하기 위한 언어
        - Markup: 시작 태그와 종료 태그로 요소를 감싸는 것

<br/><br/>

## 4-3 스타일시트: 웹페이지를 보기 좋게 꾸민다

### 스타일 시트

- 문서의 레이아웃이나 문자의 폰트와 색 등  웹페이지의 디자인을 정의하는 방법

- 스타일 시트로 웹페이지의 디자인을 지정할 수 있다.
- 문서의 구조를 나타내는 HTML 파일과는 별도로 작성함으로써 디자인 변경을 유연하게 할 수 있도록 한다.

<br/><br/>

## 4-4 URL: 웹사이트의 주소

### URL

- 웹사이트의 주소라고 불린다.
- 형식
    - {스킴}://{호스트명}/{경로명}

      ex) [https://www.notion.so/Chapter04-29efef5727f24a8aa5a39a63a8555b43](https://www.notion.so/Chapter04-29efef5727f24a8aa5a39a63a8555b43)

        - `스킴` : 웹 브라우저가 웹 서버의 데이터에 접속하기 위한 프로토콜
        - `: 뒤` : 파일이 있는 장소
        - `//` : 이 뒤로 이어지는 부분이 호스트명임을 나타냄
        - `{경로명}` : 요청한 파일이 웹 서버 어디에 있는지를 나타내는 경로
    - 호스트명 뒤에는 포트 번호가 이어지지만 대부분 생량

      (생략한 경우에는 지정된 스킴에서 프로토콜의 웰노운 포트를 사용)

<br/><br/>

## 4-5 HTTP Request: 웹사이트의 파일을 요청한다

### HTML 파일 전송

웹 브라우저와 웹 서버 애플리케이션은 HTTP를 이용해 웹페이지 파일을 전송한다.

HTTP 파일 전송은 HTTP Request와 HTTP Response를 주고받으며 이루어진다.

- HTTP
    - 하이퍼텍스트를 전송하는 프로토콜

      (다양한 종류의 파일을 전송할 수 있는 범용적인 프로토콜로도 이용 가능)

<br/>

### HTTP Request

- 웹 브라우저 → 웹 서버 애플리케이션으로 보내는 것

- 형식

```
    | 리퀘스트 라인 | HTTP 헤더 |
    | 메시지 헤더 | HTTP 헤더 |
    | 공백 라인 | HTTP 헤더 |
    | 엔티티 바디 | 웹 브라우저의 데이터 |
```

- 리퀘스트 라인
    
    - 웹 서버에 대한 실제 처리 요청을 전달
    
    - 메소드 + URI + 버전으로 구성됨
- 메시지 헤더
    
    - 요청 라인에 이어지는 여러 줄의 텍스트
    
    - 웹 브라우저의 종류와 버전, 대응하는 데이터 형식 등의 정보를 기술
- 엔티티 바디
    - POST, PUT 등의 메소드로 웹 브라우저에서 데이터를 보낼 때 사용됨

<br/><br/>

## 4-6 HTTP Response: 웹사이트의 파일을 전송한다

### HTTP Response

- HTTP Request에 대한 응답

- 형식

```
    | 리스폰스 라인 | HTTP 헤더 |
    | 메시지 헤더 | HTTP 헤더 |
    | 공백 라인 | HTTP 헤더 |
    | 엔티티 바디 | 웹 브라우저의 데이터 |
```
    
- 리스폰스 라인
    - 버전 + 상태 코드 + 설명문으로 구성됨
        - 버전: HTTP 버전
        - 설명문: 상태 코드의 의미를 간단히 보여주는 텍스트
- 메시지 헤더
    - 웹 서버 애플리케이션이 더 자세한 정보를 웹 브라우저에 전달하기 위해 이용
    - ex) 데이터 형식, 갱신 날짜 등
- 파일 크기가 크면 TCP에 의해 분할된다.

<br/><br/>

## 4-7 HTTP 쿠키: 웹사이트 접속 기록을 기억해 둔다

### HTTP 쿠키

: 웹 서버 애플리케이션이 웹 브라우저에 특정 정보를 저장해두는 기술

- 쿠키 전달 과정
    1. 웹 서버 애플리케이션은 웹 브라우저의 요청에 대한 HTTP Response 헤더에 쿠키를 포함하여 전송
    2. 웹 브라우저가 쿠키를 이용하도록 설정되어 있으면 쿠키를 저장
    3. 이후 요청부터는 HTTP Request 헤더에 쿠키도 포함하여 전송

상황에 따라 웹페이지의 내용을 커스터마이징하고 싶을 때 이용한다.

<br/><br/>

## 4-8 프록시 서버: 웹사이트 접속을 대행한다

### 프록시 서버

: 웹사이트 접속을 대행하는 서버

- 프록시를 경유하는 웹 접속 과정
    1. 클라이언트는 프록시 서버로 HTTP Request를 보낸다
    2. 프록시 서버에서 접속할 웹 서버로 HTTP Request를 보낸다.
        - 웹 서버의 입장에서는 원래 클라이언트를 알 수 없게 된다.
    3. 웹 서버에서 프록시 서버로 HTTP Response를 보낸다.
    4. 프록시 서버에서 클라이언트로 HTTP Response를 보낸다.

<br/><br/>

## 4-9 프록시 서버의 목적: 직원이 보는 웹사이트를 확인한다

### 관리자 입장에서의 프록시 서버의 목적

1. 클라이언트의 웹 브라우저에서 접속하는 웹사이트를 확인한다.
2. 유해 웹사이트에 접속할 수 없게 한다.(URL 필터링, 웹 필터링)

<br/><br/>

## 4-10 웹 애플리케이션: 웹 브라우저는 웹 서핑만 하는 게 아니다

### 웹 애플리케이션

: 웹 브라우저를 유저 인터페이스로 이용하는 애플리케이션

- 웹 브라우저를 유저 인터페이스로 이용하므로 클라이언트 PC용 전용 애플리케이션을 개발하고 설치해 둘 필요가 없다.

<br/><br/>

## 4-11 웹 접속 시의 애플리케이션과 프로토콜: 웹사이트를 볼 때의 준비

웹 접속의 대전제는 TCP/IP 설정이 바르게 되어 있는 것이다.

이용하는 애플리케이션은 웹 브라우저와 웹 서버 애플리케이션이다.

이용하는 프로토콜은 HTTP/TCP/IP의 조합이다.

그 외에도 DNS와 ARP가 필요하지만 둘 다 자동으로 실행되므로 사용자가 인식할 필요는 없다.

<br/><br/>

## 4-12 DNS 이름해석, HTTP Request와 HTTP Response: 웹사이트를 보는 흐름

### 웹사이트를 볼 때의 동작

1. 웹 브라우저에서 URL 입력
2. DNS 서버에 URL에 포함된 호스트명과 연결된 웹 서버의 IP 주소를 질의
    - DNS 서버에 질의할 때 ARP를 실행하여 이더넷의 MAC 주소를 구한다.
3. DNS 서버에서 조회한 IP 주소로 웹 브라우저와 웹 서버 애플리케이션 간에 TCP 커넥션을 맺는다.
4. TCP 커넥션을 통해 HTTP Request와 HTTP Response를 주고 받는다.
    - 응답으로 내려주는 웹페이지 파일은 TCP의 기능으로 분할되어 있다.